<section class="collection-page">
  <div class="container">
    <div class="collection-page__header">
      <h1 class="collection-page__title">{{ collection.title }}</h1>
      {%- if collection.description != blank -%}
        <p class="collection-page__desc">{{ collection.description }}</p>
      {%- endif -%}
    </div>

    {%- paginate collection.products by section.settings.products_per_page -%}
      <div class="collection-page__grid">
        {%- for product in collection.products -%}
          <a href="{{ product.url }}" class="collection-product-card">
            <div class="collection-product-card__image">
              {%- if product.featured_image -%}
                <img
                  src="{{ product.featured_image | image_url: width: 600 }}"
                  alt="{{ product.featured_image.alt | default: product.title }}"
                  loading="lazy"
                  width="600"
                  height="600"
                >
              {%- else -%}
                {{ 'product-1' | placeholder_svg_tag }}
              {%- endif -%}
              {%- unless product.available -%}
                <div class="product-card__sold-out">
                  <span>Sold Out</span>
                </div>
              {%- endunless -%}
            </div>
            <div class="collection-product-card__info">
              <h3 class="collection-product-card__title line-clamp-1">{{ product.title }}</h3>
              <div>
                <span class="collection-product-card__price">{{ product.price | money }}</span>
                {%- if product.compare_at_price > product.price -%}
                  <span class="collection-product-card__compare-price">{{ product.compare_at_price | money }}</span>
                {%- endif -%}
              </div>
            </div>
          </a>
        {%- endfor -%}
      </div>

      {%- if paginate.pages > 1 -%}
        <div style="text-align:center;padding:2rem 0;">
          {{ paginate | default_pagination }}
        </div>
      {%- endif -%}
    {%- endpaginate -%}
  </div>
</section>

{% schema %}
{
  "name": "Collection Page",
  "settings": [
    {
      "type": "range",
      "id": "products_per_page",
      "label": "Products per page",
      "min": 4,
      "max": 24,
      "default": 12
    }
  ],
  "templates": ["collection"]
}
{% endschema %}
