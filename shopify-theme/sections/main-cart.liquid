<section class="cart-page">
  <div class="container">
    <h1 class="cart-page__title">Your Bag</h1>

    {%- if cart.item_count == 0 -%}
      <div style="text-align:center;padding:4rem 0;">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="var(--color-muted-foreground)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="margin:0 auto 1rem;"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 002 1.58h9.78a2 2 0 001.95-1.57l1.65-7.43H5.12"/></svg>
        <p style="color:var(--color-muted-foreground);font-family:var(--font-body);font-weight:500;">Your bag is empty</p>
        <p style="color:var(--color-muted-foreground);font-family:var(--font-body);font-size:0.875rem;margin-top:0.5rem;">
          Emptier than the fairway after you've teed off. Let's fix that.
        </p>
        <a href="{{ routes.all_products_collection_url }}" class="btn btn-walnut" style="margin-top:1.5rem;">
          Continue Shopping
        </a>
      </div>
    {%- else -%}
      <!-- Free Shipping Progress -->
      {%- assign shipping_threshold = settings.free_shipping_threshold | times: 100 -%}
      {%- assign cart_total = cart.total_price -%}
      {%- assign remaining = shipping_threshold | minus: cart_total -%}
      {%- assign progress = cart_total | times: 100 | divided_by: shipping_threshold -%}
      {%- if progress > 100 -%}{%- assign progress = 100 -%}{%- endif -%}

      <div class="cart-page__items">
        <div class="free-shipping{% if remaining <= 0 %} free-shipping--complete{% endif %}">
          {%- if remaining > 0 -%}
            <p class="free-shipping__text">Spend <span class="amount">{{ remaining | money }}</span> more for free shipping!</p>
          {%- else -%}
            <p class="free-shipping__text">ðŸŽ‰ You've unlocked free shipping!</p>
          {%- endif -%}
          <div class="free-shipping__bar">
            <div class="free-shipping__bar-fill" style="width:{{ progress }}%;"></div>
          </div>
        </div>

        <form action="{{ routes.cart_url }}" method="post">
          {%- for item in cart.items -%}
            <div class="cart-item">
              <div class="cart-item__image">
                {%- if item.image -%}
                  <img src="{{ item.image | image_url: width: 200 }}" alt="{{ item.title }}" loading="lazy">
                {%- endif -%}
              </div>
              <div class="cart-item__info">
                <div>
                  <h4 class="cart-item__title">
                    <a href="{{ item.url }}" style="text-decoration:none;color:inherit;">{{ item.product.title }}</a>
                  </h4>
                  {%- if item.variant.title != 'Default Title' -%}
                    <p class="cart-item__variant">{{ item.variant.title }}</p>
                  {%- endif -%}
                </div>
                <p class="cart-item__price">{{ item.final_line_price | money }}</p>
              </div>
              <div class="cart-item__actions">
                <a href="{{ routes.cart_change_url }}?line={{ forloop.index }}&quantity=0" class="cart-item__remove" aria-label="Remove {{ item.title }}">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg>
                </a>
                <div class="cart-item__quantity">
                  <a href="{{ routes.cart_change_url }}?line={{ forloop.index }}&quantity={{ item.quantity | minus: 1 }}" class="cart-item__qty-btn" aria-label="Decrease quantity">âˆ’</a>
                  <span class="cart-item__qty-value">{{ item.quantity }}</span>
                  <a href="{{ routes.cart_change_url }}?line={{ forloop.index }}&quantity={{ item.quantity | plus: 1 }}" class="cart-item__qty-btn" aria-label="Increase quantity">+</a>
                </div>
              </div>
            </div>
          {%- endfor -%}

          <div class="cart-page__footer">
            <p class="cart-page__total">Total: {{ cart.total_price | money }}</p>
            <button type="submit" name="checkout" class="btn btn-gold btn-lg btn-full">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
              Checkout &bull; {{ cart.total_price | money }}
            </button>
            <a href="{{ routes.all_products_collection_url }}" style="display:block;text-align:center;margin-top:1rem;font-size:0.875rem;color:var(--color-muted-foreground);">
              Continue Shopping
            </a>
          </div>
        </form>
      </div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Cart Page",
  "settings": [],
  "templates": ["cart"]
}
{% endschema %}
